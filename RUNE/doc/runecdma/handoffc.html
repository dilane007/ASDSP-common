<HTML>
<HEAD>
<TITLE>Manpage - handoffc</TITLE>
</HEAD>

<BODY BGCOLOR="WHITE">

<CENTER><TABLE CELLSPACING=5 BORDER=0><TR><TD BGCOLOR="#A0A0A0" COLSPAN=2><UL>
<FONT SIZE=6 FACE="sans-serif"><B>handoffc<B></FONT>
</UL></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Description</FONT></TD>
<TD WIDTH=500><P>[pumb,pdmb]=handoffc(pumb,pdmb,g,homargin,pinit);</P>
Implements an ideal handover algorithm for CDMA. It assumes that the uplink power matrix contains NaN-s for all the new links. The new mobiles are initialised with an initial power. The new links (added in softhandover) to old mobiles are set to the maximum previous power. If a mobile is not linked to a base station, this is indicated by a value of -Inf in the power matrix.</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Input</FONT></TD>
<TD><TABLE BORDER=0 CELLSPACING=5 WIDTH=500><TR><TD VALIGN="TOP"><B>pumb</B></TD><TD>(m*b) power matrix for uplink; NaN for new mobiles [dB]</TD></TR>
<TR><TD VALIGN="TOP"><B>pdmb</B></TD><TD>(m*b) power matrix for downlink [dB]</TD></TR>
<TR><TD VALIGN="TOP"><B>g</B></TD><TD>(m*b) Gain matrix with gain values in dB.</TD></TR>
<TR><TD VALIGN="TOP"><B>homargin</B></TD><TD>Standard deviation of the noise added to the gain matrix when base selection is made. [dB]</TD></TR>
<TR><TD VALIGN="TOP"><B>pinit</B></TD><TD>Init power at link setup [dB]</TD></TR>
</TABLE>
</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Output</FONT></TD>
<TD><TABLE BORDER=0 CELLSPACING=5 WIDTH=500><TR><TD VALIGN="TOP"><B>pumb</B></TD><TD>(m*b) pinit for links of new mobiles -Inf if no connection between mobile and bs the current power otherwise</TD></TR>
<TR><TD VALIGN="TOP"><B>pdmb</B></TD><TD>(m*b) power matrix for downlink. Same rules as for uplink</TD></TR>
</TABLE>
</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2" COLSPAN=2>Source Code</TD></TR>
<TR><TD COLSPAN=2><PRE>function  [pumb, pdmb] = handoffc(pumb, pdmb, g, homargin, pinit);

<FONT COLOR="DARKGREEN">% by Magnus Almgren 000925 010123</FONT>

if isempty(pumb)   <FONT COLOR="DARKGREEN">% the empty case</FONT>
 return 
end

newu = isnan(pumb(:,1)); <FONT COLOR="DARKGREEN">% Do only act on already assigned channels.</FONT>
m = (1:size(g,1))'; <FONT COLOR="DARKGREEN">% make an index to each row in the gain matrix</FONT>
bind  = <A HREF="../runetools/mplus.html">mplus</A>(homargin,g,-max(g,[],2))>=0;

pumb  = <A HREF="../runetools/lin2db.html">lin2db</A>(<A HREF="../runetools/mprod.html">mprod</A>(~newu, bind, <A HREF="../runetools/db2lin.html">db2lin</A>(max(pumb,[],2))));
pumb(logical(<A HREF="../runetools/mprod.html">mprod</A>(newu,bind))) = pinit;
pumb(isnan(pumb)) = -Inf;

pdmb  = <A HREF="../runetools/lin2db.html">lin2db</A>(<A HREF="../runetools/mprod.html">mprod</A>(~newu, bind, <A HREF="../runetools/db2lin.html">db2lin</A>(max(pdmb,[],2))));
pdmb(logical(<A HREF="../runetools/mprod.html">mprod</A>(newu,bind))) = pinit;
pdmb(isnan(pdmb)) = -Inf;

<FONT COLOR="DARKGREEN">% $Id: handoffc.m,v 1.1 2004/03/15 09:31:04 bogdant Exp $</FONT>
</PRE></TD></TR>
</TABLE></CENTER>
</BODY>
</HTML>