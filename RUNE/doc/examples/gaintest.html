<HTML>
<HEAD>
<TITLE>Manpage - gaintest</TITLE>
</HEAD>

<BODY BGCOLOR="WHITE">

<CENTER><TABLE CELLSPACING=5 BORDER=0><TR><TD BGCOLOR="#A0A0A0" COLSPAN=2><UL>
<FONT SIZE=6 FACE="sans-serif"><B>gaintest<B></FONT>
</UL></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Description</FONT></TD>
<TD WIDTH=500><P>[gmb,xym,xyb,fib]=gaintest</P>
Generates a gain matrix for a number of mobiles in a small system</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Output</FONT></TD>
<TD><TABLE BORDER=0 CELLSPACING=5 WIDTH=500><TR><TD VALIGN="TOP"><B>gmb</B></TD><TD>gain matrix in dB. Size is users (mobiles) by basestations</TD></TR>
<TR><TD VALIGN="TOP"><B>xym</B></TD><TD>complex user positions. Size is number of users by 1.</TD></TR>
<TR><TD VALIGN="TOP"><B>xyb</B></TD><TD>complex basestation positions. Size is 1 by number of bases.</TD></TR>
<TR><TD VALIGN="TOP"><B>fib</B></TD><TD>complex basestation direction. Size is 1 by number of bases.</TD></TR>
</TABLE>
</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Try</FONT></TD>
<TD><PRE>gmb = gaintest</PRE></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">See Also</FONT></TD>
<TD><A HREF="mobiletest.html">mobiletest</A></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2" COLSPAN=2>Source Code</TD></TR>
<TR><TD COLSPAN=2><PRE>function [gmb, xym, xyb, fib] = gaintest

<FONT COLOR="DARKGREEN">% by Magnus Almgren 040209</FONT>

<FONT COLOR="DARKGREEN">% Create vbase stations</FONT>
par.cellradius = 1000; <FONT COLOR="DARKGREEN">% cell radius [m]</FONT>
par.km = 2;            <FONT COLOR="DARKGREEN">% km^2+lm^2+km*lm => the number of sites</FONT>
par.lm = 1;            <FONT COLOR="DARKGREEN">% related to km above</FONT>
par.sps = 3;           <FONT COLOR="DARKGREEN">% Number of sectors per site</FONT>

<FONT COLOR="DARKGREEN">% xyb --      base antenna positon</FONT>
<FONT COLOR="DARKGREEN">% fib --      relative vector pointing from base to center of cell. 0 if omincell</FONT>
<FONT COLOR="DARKGREEN">% rhombvec -- vectors that will span the system (used for wrap around)</FONT>
[xyb,fib,rhombvec]=<A HREF="../runegain/crecells.html">crecells</A>(par.cellradius,par.sps,par.km,par.lm);

<FONT COLOR="DARKGREEN">% Create new mobiles </FONT>

<FONT COLOR="DARKGREEN">% dt, amean and vmean has no meaning in this example </FONT>
par.amean = 1;         <FONT COLOR="DARKGREEN">% mean acceleration [m/s/s]</FONT>
par.vmean = 10;        <FONT COLOR="DARKGREEN">% mean speed  [m/s]</FONT>
par.dt = 1;            <FONT COLOR="DARKGREEN">% time interval in the simulation loop [s]</FONT>

nmob = 300;             <FONT COLOR="DARKGREEN">% number of users</FONT>
xym=<A HREF="../runetools/nans.html">nans</A>(nmob,1);      <FONT COLOR="DARKGREEN">% template for position (complex entity)</FONT>
xyv=<A HREF="../runetools/nans.html">nans</A>(nmob,1);      <FONT COLOR="DARKGREEN">% template for speed </FONT>
m = (1:nmob).';        <FONT COLOR="DARKGREEN">% userid </FONT>

<FONT COLOR="DARKGREEN">% xym -- user position </FONT>
<FONT COLOR="DARKGREEN">% xyv -- user speed not used in this example</FONT>
[xym, xyv]=<A HREF="../runegain/mobmove.html">mobmove</A>(xym,xyv,par.vmean,par.amean,par.dt,rhombvec);

<FONT COLOR="DARKGREEN">% Calculate the gain between bases and mobiles</FONT>
par.gainconst = 21;    <FONT COLOR="DARKGREEN">% gain at 1 meter distance </FONT>
par.noise = -118;      <FONT COLOR="DARKGREEN">% thermal noise floor -118 dBm</FONT>
par.alpha = 3.5;       <FONT COLOR="DARKGREEN">% distance attenuation coefficient</FONT>
par.sigma = 6;         <FONT COLOR="DARKGREEN">% standard deviation for the log-normal fading in dB</FONT>
par.raa = 0.5;         <FONT COLOR="DARKGREEN">% lognormal correlation down link (typical 0.5)</FONT>
par.corrdist = 110;    <FONT COLOR="DARKGREEN">% lognormal fading correlation distance [m]</FONT>
par.seed = 1;          <FONT COLOR="DARKGREEN">% seed to the random generator</FONT>

<FONT COLOR="DARKGREEN">% generate the lognormal shadow fading map</FONT>
[lognmap, lognmapvec] = <A HREF="../runegain/crelognmap.html">crelognmap</A>(xyb, rhombvec, par.corrdist);

<FONT COLOR="DARKGREEN">% calculate the path gain matrix in dB between users (along first dimension, row)</FONT>
<FONT COLOR="DARKGREEN">% and bases (along second dimension, column)</FONT>
gmb = <A HREF="../runegain/pathgain.html">pathgain</A>(xym, xyb, fib, par.sps, rhombvec, ...
 par.gainconst, par.alpha, par.sigma, par.raa, lognmap, lognmapvec);

<FONT COLOR="DARKGREEN">% Plot the system</FONT>
figure(1);
clf   <FONT COLOR="DARKGREEN">% clear plot</FONT>
<A HREF="../runegain/plothex.html">plothex</A>(xyb,fib);  <FONT COLOR="DARKGREEN">% Cell pattern</FONT>
<A HREF="../runetools/ploth.html">ploth</A>(xym,'b*');  <FONT COLOR="DARKGREEN">% users</FONT>

<FONT COLOR="DARKGREEN">% $Id: gaintest.m,v 1.2 2004/03/11 15:00:54 olav Exp $</FONT>
</PRE></TD></TR>
</TABLE></CENTER>
</BODY>
</HTML>