<HTML>
<HEAD>
<TITLE>Manpage - percentile</TITLE>
</HEAD>

<BODY BGCOLOR="WHITE">

<CENTER><TABLE CELLSPACING=5 BORDER=0><TR><TD BGCOLOR="#A0A0A0" COLSPAN=2><UL>
<FONT SIZE=6 FACE="sans-serif"><B>percentile<B></FONT>
</UL></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Description</FONT></TD>
<TD WIDTH=500><P>res=percentile(a,perc,dim)</P>
Calculates percentile values along dim for the elements of a</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Input</FONT></TD>
<TD><TABLE BORDER=0 CELLSPACING=5 WIDTH=500><TR><TD VALIGN="TOP"><B>a</B></TD><TD>A matrix with observations along dimension dim</TD></TR>
<TR><TD VALIGN="TOP"><B>perc</B></TD><TD>Percent values for which percentiles are calculate.</TD></TR>
<TR><TD VALIGN="TOP"><B>dim</B></TD><TD>Dimension along which percentiles are calculated</TD></TR>
</TABLE>
</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Output</FONT></TD>
<TD><TABLE BORDER=0 CELLSPACING=5 WIDTH=500><TR><TD VALIGN="TOP"><B>res</B></TD><TD>One percentile value for each element of perc and for each a.</TD></TR>
</TABLE>
</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Try</FONT></TD>
<TD><PRE>percentile(rand(1000,1),25), percentile(randn(1000,2),[25; 50; 75])</PRE></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">See Also</FONT></TD>
<TD><A HREF="index1.html">index1</A>, <A HREF="setifnotexist.html">setifnotexist</A></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2" COLSPAN=2>Source Code</TD></TR>
<TR><TD COLSPAN=2><PRE>function res = percentile(a, perc, dim)

<FONT COLOR="DARKGREEN">% by Magnus Almgren 031204</FONT>

if  isempty(a)|isempty(perc)
 res = [];
 return
end
 <FONT COLOR="DARKGREEN">% dim is set to first non singleton dimension of a</FONT>
<A HREF="setifnotexist.html">setifnotexist</A>('dim',<A HREF="firstnonsing.html">firstnonsing</A>(a));

[am, percm] = <A HREF="adjsizabdim.html">adjsizabdim</A>(dim,a,perc); <FONT COLOR="DARKGREEN">% shape perc and a to the same size</FONT>
bm = sort(am,dim);
siz = size(am,dim);
<FONT COLOR="DARKGREEN">% calculate index pointing to the closest value in bm</FONT>
ind1 = max(1, min(siz, round(percm/100*siz))); 
ind = <A HREF="index1.html">index1</A>(ind1,dim,size(bm));
res = bm(ind); <FONT COLOR="DARKGREEN">% pick that value</FONT>
<FONT COLOR="DARKGREEN">% $Id: percentile.m,v 1.1 2004/02/19 17:27:44 bogdant Exp $</FONT>
</PRE></TD></TR>
</TABLE></CENTER>
</BODY>
</HTML>