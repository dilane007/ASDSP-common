<HTML>
<HEAD>
<TITLE>Manpage - antennagain</TITLE>
</HEAD>

<BODY BGCOLOR="WHITE">

<CENTER><TABLE CELLSPACING=5 BORDER=0><TR><TD BGCOLOR="#A0A0A0" COLSPAN=2><UL>
<FONT SIZE=6 FACE="sans-serif"><B>antennagain<B></FONT>
</UL></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Description</FONT></TD>
<TD WIDTH=500><P>antg=antennagain(fi,nantw)</P>
Returns antenna gain in dB given an anagle in radians. The antenna lobe is approximated with a (sin(fi)/fi)^2 within the sector.</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Input</FONT></TD>
<TD><TABLE BORDER=0 CELLSPACING=5 WIDTH=500><TR><TD VALIGN="TOP"><B>fi</B></TD><TD>Direction towards antenna [radians]</TD></TR>
<TR><TD VALIGN="TOP"><B>nantw</B></TD><TD>Nominal antenna width. Default 1/3. Used to change the antenna width.</TD></TR>
</TABLE>
</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Output</FONT></TD>
<TD><TABLE BORDER=0 CELLSPACING=5 WIDTH=500><TR><TD VALIGN="TOP"><B>antg</B></TD><TD>A row vector containing the gain in each 1 degree direction. The length of the vector is 360 where last index corresponds to zero degrees and first index to 1 degree.</TD></TR>
</TABLE>
</TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">Try</FONT></TD>
<TD><PRE>fi = linspace(-pi,pi,361).';
plot(fi,antennagain(fi,1/3))
plot(fi,antennagain(fi,1)) =&gt; omni
plot(fi,antennagain(fi,1./(1:12)))
polar(fi,db2lin(antennagain(fi,1/3)/3.5))  % the space coverage</PRE></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2">See Also</FONT></TD>
<TD><A HREF="pathgain.html">pathgain</A></TD></TR>
<TR><TD COLSPAN=2 HEIGHT=6><FONT SIZE="-7">&nbsp;</FONT></TD></TR>

<TR><TD VALIGN="TOP"><FONT SIZE="+2" COLSPAN=2>Source Code</TD></TR>
<TR><TD COLSPAN=2><PRE>function antg = antennagain(fi,nantw)

<FONT COLOR="DARKGREEN">% by Magnus Almgren 030717 MA</FONT>
if ~exist('fi','var')
 fi = (1:360)/360*2*pi;
end
[fi nantw] = <A HREF="../runetools/adjsiza.html">adjsiza</A>(fi, nantw);
blg = -30; <FONT COLOR="DARKGREEN">% relative backlobe gain</FONT>
maxg = 12.2; <FONT COLOR="DARKGREEN">% max antenna gain in forward direction for the omni case</FONT>
lw = 0.75207; <FONT COLOR="DARKGREEN">% Fitted to give 10.53 dB drop of gain @ 60 degrees <=> 35*log10(0.5)</FONT>
              <FONT COLOR="DARKGREEN">% for the case when nantw = 1/3.</FONT>
antg = max(blg,ag(<A HREF="../runetools/mdiv.html">mdiv</A>(wrap(fi),nantw)*lw)-<A HREF="../runetools/lin2db.html">lin2db</A>(nantw))+maxg;
antg(nantw>=1) = maxg; <FONT COLOR="DARKGREEN">% For the omnilobe case </FONT>

function fout = wrap(f) <FONT COLOR="DARKGREEN">% wrap any angle into -pi to pi</FONT>
fout = mod(f+pi,2*pi)-pi; 

function g = ag(f) <FONT COLOR="DARKGREEN">% sinc lobe shaped antenna</FONT>
fi = min(pi,abs(f)); <FONT COLOR="DARKGREEN">% fi is limited  between 0 pi/2</FONT>
g = 2*<A HREF="../runetools/lin2db.html">lin2db</A>(<A HREF="../runetools/mdiv.html">mdiv</A>(sin(fi),fi)); <FONT COLOR="DARKGREEN">% power gain [dB]</FONT>
g(fi==0) = 0; <FONT COLOR="DARKGREEN">% fix the case 0/0</FONT>

<FONT COLOR="DARKGREEN">% $Id: antennagain.m,v 1.2 2004/03/11 15:01:30 olav Exp $</FONT>
</PRE></TD></TR>
</TABLE></CENTER>
</BODY>
</HTML>